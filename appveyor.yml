# Useful references:
# https://packaging.python.org/appveyor/
# https://github.com/pytest-dev/pytest/blob/master/appveyor.yml

version: '{branch}-{build}'

environment:

  matrix:

    # For Python versions available on Appveyor, see
    # http://www.appveyor.com/docs/installed-software#python

    - PYTHON: "C:\\Python27"
    - PYTHON: "C:\\Python33"
    - PYTHON: "C:\\Python34"
    - PYTHON: "C:\\Python35"

install:
  # Installation
  - "%PYTHON%\\python.exe -m pip install lxml==3.6.0"
  - "%PYTHON%\\python.exe -m pip install -r requirements/dev.txt"
  - "%PYTHON%\\python.exe -m pip install ."

build: off

test_script:
  # Put your test command here.
  # Note that you must use the environment variable %PYTHON% to refer to
  # the interpreter you're using - Appveyor does not do anything special
  # to put the Python evrsion you want to use on PATH.
  - "%PYTHON%\\python.exe -m py.test --junit-xml=junit-results.xml"
  # upload results to AppVeyor
  - ps: $wc = New-Object 'System.Net.WebClient'
  - ps: '$wc.UploadFile("https://ci.appveyor.com/api/testresults/junit/$($env:APPVEYOR_JOB_ID)", (Resolve-Path .\junit-results.xml))'
